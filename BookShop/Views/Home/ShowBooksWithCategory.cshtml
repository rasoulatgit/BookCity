@model IEnumerable<BookShop.ViewModel.BookIndexHomeViewModel>
@{
    ViewData["Title"] = "نمایش بر اساس دسته بندی";
    List<BooksTreeCategoryViewModel> Categories = ViewBag.Categories;
    Category category = ViewBag.Category;
}

<div class="mt-4">
    @if (ViewBag.ConfirmEmailAlert != null)
    {
        <p class="alert alert-info">@ViewBag.ConfirmEmailAlert</p>
    }
</div>


<div class="row" style="margin-top: 62px">

    <div id="content" class="col-12">

        <div class="row mt-5">
            <div id="placeholder"></div>
            <div class="col-md-3 d-none d-lg-inline" id="sidebar">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        دسته بندی کتابها
                    </div>
                    <div class="card-body">
                        @foreach (var item in Categories)
                        {
                            if (item != null)
                            {
                                <div class="list-group">
                                    <a href="/Home/ShowBooksWithCategory?catID=@item.id" class="list-group-item list-group-item-action  @(item.id == category.CategoryID ? "active" : "")">
                                        @item.title
                                        <span class="float-left badge badge-info badge-pill">@item.CategoryBooksCount</span>
                                    </a>

                                </div>
                            }
                        }
                    </div>
                </div>
            </div>
            <div class="col-md-9 col-12">

                <h5 id="TopLastBookPublished"> کتاب های موجود در دسته‌بندی <b>@category.CategoryName</b>  </h5>
                <div class="row my-5">
                    @if (Model.Any())
                    {
                        @foreach (var item in Model)
                        {
                            <div class="col-8 col-md-4 col-xl-3 m-2 p-0 post">

                                @if (item != null)
                                {
                                    if (item.ImageByte != null)
                                    {
                                        <img src="/admin/books/ShowImage/@item.BookID" class="img-fluid my-3 rounded-pill" alt="@item.Title">
                                    }
                                    else
                                    {
                                        <img src="~/imgs/book/books/6008610091._SS,400_.jpg" class="img-fluid my-3 rounded-pill" alt="bookCity">
                                    }
                                    <h4>@item.Title</h4>
                                    <hr />
                                    <span> نویسنده : @item.AuthorName</span>
                                    <hr />
                                    <h5> قیمت : @item.Price.ToString("#,### تومان")</h5>
                                    <p>
                                        مختصری از کتاب :
                                        @if (item.Summury != null)
                                        {
                                            @item.Summury
                                        }
                                        else
                                        {
                                            <span>خلاصه‌ای برای این کتاب ثبت نشده است. </span>
                                        }
                                        <span>
                                            <button class="btn btn-info btn-block mt-5 mb-1 rounded  text-white" data-toggle="ajax-modal" data-url="/Home/Details/@item.BookID">جزئیات بیشتر</button>
                                            <a href="#" class="btn btn-success btn-block  rounded text-white">خرید</a>
                                        </span>
                                    </p>
                                }
                            </div>
                        }

                    }
                    else
                    {
                        <p class="bg-warning mx-auto">
                            کتابی در این دسته بندی ثبت نشده است. <a href="/">بازگشت</a>
                        </p>
                    }
                </div>
            </div>
        </div>
    </div>

</div>
